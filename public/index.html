<!DOCTYPE html>
<html>
<head>
    <title>Payment Form</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { width: 100%; padding: 8px; box-sizing: border-box; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        .error { color: red; margin-top: 10px; }
        .success { color: green; margin-top: 10px; }
    </style>
</head>
<body>
    <h2>Payment Form</h2>
    <form id="payment-form">
        <div class="form-group">
            <label>Amount:</label>
            <input type="number" id="amount" name="amount" step="0.01" required value="10">
        </div>
        <div class="form-group">
            <label>Currency:</label>
            <input type="text" id="currency" name="currency" required value="USD">
        </div>
        <div class="form-group">
            <label>Card Number:</label>
            <input type="text" id="card_number" name="card_number" required value="4111111111111111">
        </div>
        <div class="form-group">
            <label>Expiry Month (MM):</label>
            <input type="text" id="expiry_month" name="expiry_month" required value="12">
        </div>
        <div class="form-group">
            <label>Expiry Year (YYYY):</label>
            <input type="text" id="expiry_year" name="expiry_year" required value="2025">
        </div>
        <div class="form-group">
            <label>CVV:</label>
            <input type="text" id="cvv" name="cvv" required value="123">
        </div>
        <button type="submit">Process Payment</button>
    </form>

    <div id="result"></div>

    <script>
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data as JSON
            const formData = {
                amount: document.getElementById('amount').value,
                currency: document.getElementById('currency').value,
                card_number: document.getElementById('card_number').value,
                expiry_month: document.getElementById('expiry_month').value,
                expiry_year: document.getElementById('expiry_year').value,
                cvv: document.getElementById('cvv').value
            };
            
            // Send as JSON
            fetch('process-payment.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                const resultDiv = document.getElementById('result');
                if (data.success) {
                    resultDiv.className = 'success';
                    resultDiv.innerHTML = `Payment successful! Transaction ID: ${data.transaction_id}`;
                } else {
                    resultDiv.className = 'error';
                    resultDiv.innerHTML = `Payment failed: ${data.error}`;
                }
            })
            .catch(error => {
                const resultDiv = document.getElementById('result');
                resultDiv.className = 'error';
                resultDiv.innerHTML = 'An error occurred while processing the payment';
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>